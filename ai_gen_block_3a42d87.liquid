{% doc %}
  @prompt
    Build a responsive, customizable peptide dosage calculator as a Shopify page block. It must provide instant, real-time dose calculations based on user inputs.
    
    Layout & Design:
    
    Structure: Responsive two-column layout that stacks to a single column on mobile.
    
    Customization: Allow admin inputs for primary/background colors, fonts, and button border-radius.
    
    Functionality:
    
    Syringe Visualizer (Left Column):
    
    A visual aid with selectable images for 0.3, 0.5, and 1.0 ml syringes.
    
    This selection is for user reference only and does not affect the calculation.
    
    Calculation Inputs (Right Column):
    
    Peptide Vial Quantity (mg): Buttons for common values and an "Other" option that reveals a number input field.
    
    Reconstitution Liquid Volume (ml): Buttons for common values and an "Other" option that reveals a number input field.
    
    Desired Dose: Buttons for common values (mcg and mg). The "Other" option must reveal a number input with an adjacent unit selector (mcg/mg).
    
    Calculation Logic & Output:
    
    Update: The result must update in real-time as inputs are changed.
    
    Formula:
    
    Concentration (mg/ml) = Total Peptide (mg) / Water Volume (ml)
    
    Standardized Dose (mg) = Convert user's desired dose to mg
    
    Volume (ml) = Standardized Dose (mg) / Concentration
    
    Syringe Units = Volume (ml) * 100
    
    Display:
    
    Show results in a clear output box titled "Your Required Dose."
    
    Format: "Draw to the [Volume, rounded to 2 decimals] ml mark..." and "This is equal to [Units, rounded to nearest whole number] units on a U-100 syringe."
    
    Show a prompt if required fields are empty., Enhance the responsive peptide dosage calculator as a Shopify page block with added images for syringes, peptide vials, and bacteriostatic water. All inputs remain visible and calculations update in real-time.
    
    Layout & Design:
    Two-column layout stacking on mobile. Admin can customize colors, fonts, and button border-radius.
    
    Functionality:
    1. Syringe Visualizer (Left): User selects 3 ml, 5 ml, or 10 ml; corresponding syringe image updates. Admin uploads images for all sizes. Syringe selection is visual only.
    
    2. Calculation Inputs (Right):
    
    Peptide Vial: 2, 3, 5, 10, 15 mg, Other.
    
    Bacteriostatic Water: 1, 2, 3, 5 ml, Other.
    
    Desired Dose: 50, 100, 250, 500 mcg, 1, 2.5 mg, Other (with unit selector).
    
    Images for Sections: Admin uploads vial and water images, shown left of each input section.
    
    3. Calculation & Output: Updates in real-time. Formula:
    
    Concentration = Total Peptide / Water Volume
    
    Standardized Dose = convert to mg
    
    Volume = Dose / Concentration
    
    Syringe Units = Volume * 100
    
    Output box: "Your Required Dose" showing ml (2 decimals) and units (nearest whole). Prompt if fields empty.
    
    4. Dynamic Behavior: Syringe image changes with selection. Section images left-aligned. All buttons and “Other” fields remain functional.
    
    5. Additional: Fully responsive, mobile-friendly, accessible, with smooth transitions and labeled images., Can you use 0.3 ml instead of 3 ml, 0.5 ml instead of 5 ml, 1.0 ml instead of 10 ml.
    
    
    Secondly for the result can we show a scale with filled up portion as a result. so for example i used 0.3 ml and the required dose calculated is 0.1 ml then can we make show a scale with values of 0.3 ml syringe and fill up 0.1 ml with gold?, in the visualization it is not filling up the color. can you please check that?, in visualization can we also add all the other points of the scale.
    
    for example for 0.5, can we add 0.1, 0.2, 0.3 and 0.4 including 0 and 0.5.
    
    similarly for 0.3 and 1.0, can you remove the selected image box below the syringe option. the one under the 0.3, 0.5 and 1 ml containers. we dont really need that, can we make the background of the calculated dose white. or if you could provide me with configurations for all colors used, can we increase the sizes of the images by double and also allow me to display them in an angle. so if i choose 90 deg they wuld be displayed in vertical.
    
    also can we remove image for desired dose section
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-peptide-calculator-{{ ai_gen_id }} {
    background-color: {{ block.settings.background_color }};
    padding: 40px;
    border-radius: {{ block.settings.border_radius }}px;
    font-family: {{ block.settings.font_family.family }}, {{ block.settings.font_family.fallback_families }};
    font-weight: {{ block.settings.font_family.weight }};
    max-width: 100%;
  }

  .ai-peptide-calculator__container-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    max-width: 1200px;
    margin: 0 auto;
  }

  .ai-peptide-calculator__title-{{ ai_gen_id }} {
    text-align: center;
    margin-bottom: 30px;
    color: {{ block.settings.text_color }};
    font-size: 28px;
    font-weight: 700;
    grid-column: 1 / -1;
  }

  .ai-peptide-calculator__syringe-section-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .ai-peptide-calculator__syringe-title-{{ ai_gen_id }} {
    color: {{ block.settings.text_color }};
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 20px;
    text-align: center;
  }

  .ai-peptide-calculator__syringe-options-{{ ai_gen_id }} {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .ai-peptide-calculator__syringe-option-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    padding: 15px;
    border: 2px solid transparent;
    border-radius: {{ block.settings.button_border_radius }}px;
    transition: all 0.3s ease;
    background-color: {{ block.settings.syringe_option_background }};
  }

  .ai-peptide-calculator__syringe-option-{{ ai_gen_id }}:hover {
    border-color: {{ block.settings.primary_color }};
  }

  .ai-peptide-calculator__syringe-option-{{ ai_gen_id }}.active {
    border-color: {{ block.settings.primary_color }};
    background-color: {{ block.settings.syringe_option_active_background }};
  }

  .ai-peptide-calculator__syringe-image-{{ ai_gen_id }} {
    width: 160px;
    height: 240px;
    background-color: {{ block.settings.image_placeholder_background }};
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 10px;
    position: relative;
    overflow: hidden;
  }

  .ai-peptide-calculator__syringe-image-{{ ai_gen_id }} img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    transform: rotate({{ block.settings.syringe_image_rotation }}deg);
    transition: transform 0.3s ease;
  }

  .ai-peptide-calculator__syringe-image-{{ ai_gen_id }} svg {
    width: 120px;
    height: 200px;
    fill: {{ block.settings.icon_color }};
    transform: rotate({{ block.settings.syringe_image_rotation }}deg);
    transition: transform 0.3s ease;
  }

  .ai-peptide-calculator__syringe-label-{{ ai_gen_id }} {
    font-size: 14px;
    font-weight: 600;
    color: {{ block.settings.text_color }};
  }

  .ai-peptide-calculator__inputs-section-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    gap: 25px;
  }

  .ai-peptide-calculator__input-group-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .ai-peptide-calculator__input-header-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .ai-peptide-calculator__section-image-{{ ai_gen_id }} {
    width: 120px;
    height: 120px;
    background-color: {{ block.settings.image_placeholder_background }};
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    flex-shrink: 0;
  }

  .ai-peptide-calculator__section-image-{{ ai_gen_id }} img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    transform: rotate({{ block.settings.section_image_rotation }}deg);
    transition: transform 0.3s ease;
  }

  .ai-peptide-calculator__section-image-{{ ai_gen_id }} svg {
    width: 80px;
    height: 80px;
    fill: {{ block.settings.icon_color }};
    transform: rotate({{ block.settings.section_image_rotation }}deg);
    transition: transform 0.3s ease;
  }

  .ai-peptide-calculator__input-label-{{ ai_gen_id }} {
    color: {{ block.settings.text_color }};
    font-size: 16px;
    font-weight: 600;
    flex-grow: 1;
  }

  .ai-peptide-calculator__button-group-{{ ai_gen_id }} {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }

  .ai-peptide-calculator__preset-button-{{ ai_gen_id }} {
    padding: 10px 16px;
    border: 2px solid {{ block.settings.button_border_color }};
    background-color: {{ block.settings.button_background }};
    color: {{ block.settings.button_text_color }};
    border-radius: {{ block.settings.button_border_radius }}px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.3s ease;
  }

  .ai-peptide-calculator__preset-button-{{ ai_gen_id }}:hover,
  .ai-peptide-calculator__preset-button-{{ ai_gen_id }}.active {
    background-color: {{ block.settings.button_active_background }};
    color: {{ block.settings.button_active_text_color }};
    border-color: {{ block.settings.button_active_border_color }};
  }

  .ai-peptide-calculator__custom-input-{{ ai_gen_id }} {
    display: none;
    margin-top: 10px;
    opacity: 0;
    transform: translateY(-10px);
    transition: all 0.3s ease;
  }

  .ai-peptide-calculator__custom-input-{{ ai_gen_id }}.active {
    display: flex;
    opacity: 1;
    transform: translateY(0);
    gap: 10px;
    align-items: center;
  }

  .ai-peptide-calculator__input-field-{{ ai_gen_id }} {
    padding: 12px 16px;
    border: 2px solid {{ block.settings.input_border_color }};
    background-color: {{ block.settings.input_background }};
    color: {{ block.settings.input_text_color }};
    border-radius: {{ block.settings.button_border_radius }}px;
    font-size: 16px;
    flex-grow: 1;
    min-width: 0;
    transition: border-color 0.3s ease;
  }

  .ai-peptide-calculator__input-field-{{ ai_gen_id }}:focus {
    outline: none;
    border-color: {{ block.settings.input_focus_border_color }};
  }

  .ai-peptide-calculator__unit-selector-{{ ai_gen_id }} {
    padding: 12px 16px;
    border: 2px solid {{ block.settings.input_border_color }};
    background-color: {{ block.settings.input_background }};
    color: {{ block.settings.input_text_color }};
    border-radius: {{ block.settings.button_border_radius }}px;
    font-size: 16px;
    cursor: pointer;
    transition: border-color 0.3s ease;
  }

  .ai-peptide-calculator__unit-selector-{{ ai_gen_id }}:focus {
    outline: none;
    border-color: {{ block.settings.input_focus_border_color }};
  }

  .ai-peptide-calculator__result-{{ ai_gen_id }} {
    grid-column: 1 / -1;
    background-color: {{ block.settings.result_background }};
    border: 2px solid {{ block.settings.result_border_color }};
    border-radius: {{ block.settings.border_radius }}px;
    padding: 25px;
    text-align: center;
    margin-top: 20px;
    transition: all 0.3s ease;
  }

  .ai-peptide-calculator__result-title-{{ ai_gen_id }} {
    color: {{ block.settings.result_title_color }};
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 15px;
  }

  .ai-peptide-calculator__result-text-{{ ai_gen_id }} {
    color: {{ block.settings.result_text_color }};
    font-size: 16px;
    line-height: 1.5;
    margin-bottom: 20px;
  }

  .ai-peptide-calculator__result-highlight-{{ ai_gen_id }} {
    color: {{ block.settings.result_highlight_color }};
    font-weight: 700;
  }

  .ai-peptide-calculator__empty-state-{{ ai_gen_id }} {
    color: {{ block.settings.empty_state_color }};
    font-style: italic;
  }

  .ai-peptide-calculator__scale-container-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    margin-top: 20px;
  }

  .ai-peptide-calculator__scale-title-{{ ai_gen_id }} {
    font-size: 16px;
    font-weight: 600;
    color: {{ block.settings.result_text_color }};
  }

  .ai-peptide-calculator__scale-{{ ai_gen_id }} {
    position: relative;
    width: 400px;
    height: 40px;
    background-color: {{ block.settings.scale_background }};
    border: 2px solid {{ block.settings.scale_border_color }};
    border-radius: 20px;
    overflow: hidden;
  }

  .ai-peptide-calculator__scale-fill-{{ ai_gen_id }} {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: {{ block.settings.scale_fill_color }};
    border-radius: 18px;
    transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    width: 0%;
    z-index: 2;
  }

  .ai-peptide-calculator__scale-labels-{{ ai_gen_id }} {
    display: flex;
    justify-content: space-between;
    width: 400px;
    margin-top: 8px;
    font-size: 11px;
    color: {{ block.settings.scale_label_color }};
    font-weight: 500;
  }

  .ai-peptide-calculator__scale-markers-{{ ai_gen_id }} {
    position: absolute;
    top: -5px;
    left: 0;
    right: 0;
    height: 50px;
    pointer-events: none;
    z-index: 1;
  }

  .ai-peptide-calculator__scale-marker-{{ ai_gen_id }} {
    position: absolute;
    width: 1px;
    height: 15px;
    background-color: {{ block.settings.scale_marker_color }};
    top: 0;
  }

  .ai-peptide-calculator__scale-marker-{{ ai_gen_id }}.major {
    height: 25px;
    width: 2px;
    background-color: {{ block.settings.scale_major_marker_color }};
  }

  .ai-peptide-calculator__dose-indicator-{{ ai_gen_id }} {
    position: absolute;
    top: -8px;
    transform: translateX(-50%);
    width: 4px;
    height: 56px;
    background-color: {{ block.settings.dose_indicator_color }};
    border-radius: 2px;
    transition: left 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 3;
    left: 0%;
  }

  .ai-peptide-calculator__dose-indicator-{{ ai_gen_id }}::after {
    content: '';
    position: absolute;
    top: -6px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 8px solid {{ block.settings.dose_indicator_color }};
  }

  .ai-peptide-calculator__dose-value-{{ ai_gen_id }} {
    position: absolute;
    top: -35px;
    left: 50%;
    transform: translateX(-50%);
    background-color: {{ block.settings.dose_indicator_color }};
    color: {{ block.settings.dose_value_text_color }};
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 600;
    white-space: nowrap;
  }

  @media screen and (max-width: 768px) {
    .ai-peptide-calculator__container-{{ ai_gen_id }} {
      grid-template-columns: 1fr;
      gap: 30px;
      padding: 0 15px;
    }

    .ai-peptide-calculator-{{ ai_gen_id }} {
      padding: 20px 10px;
    }
    .ai-peptide-calculator__result-{{ ai_gen_id }} {
      margin-left: 15px;
      margin-right: 15px;
    }

    .ai-peptide-calculator__syringe-options-{{ ai_gen_id }} {
      gap: 10px;
    }

    .ai-peptide-calculator__syringe-option-{{ ai_gen_id }} {
      padding: 10px;
    }

    .ai-peptide-calculator__syringe-image-{{ ai_gen_id }} {
      width: 120px;
      height: 180px;
    }

    .ai-peptide-calculator__syringe-image-{{ ai_gen_id }} svg {
      width: 90px;
      height: 150px;
    }

    .ai-peptide-calculator__section-image-{{ ai_gen_id }} {
      width: 100px;
      height: 100px;
    }

    .ai-peptide-calculator__section-image-{{ ai_gen_id }} svg {
      width: 60px;
      height: 60px;
    }

    .ai-peptide-calculator__button-group-{{ ai_gen_id }} {
      gap: 8px;
    }

    .ai-peptide-calculator__preset-button-{{ ai_gen_id }} {
      padding: 8px 12px;
      font-size: 13px;
    }

    .ai-peptide-calculator__input-header-{{ ai_gen_id }} {
      gap: 10px;
    }

    .ai-peptide-calculator__scale-{{ ai_gen_id }},
    .ai-peptide-calculator__scale-labels-{{ ai_gen_id }} {
      width: 300px;
    }
  }
  /* RTL Support for Arabic */
  [dir="rtl"] .ai-peptide-calculator__container-{{ ai_gen_id }},
  .ai-peptide-calculator-{{ ai_gen_id }}[data-locale="ar"] .ai-peptide-calculator__container-{{ ai_gen_id }} {
    direction: rtl;
  }

  [dir="rtl"] .ai-peptide-calculator__input-header-{{ ai_gen_id }},
  .ai-peptide-calculator-{{ ai_gen_id }}[data-locale="ar"] .ai-peptide-calculator__input-header-{{ ai_gen_id }} {
    flex-direction: row-reverse;
  }

  [dir="rtl"] .ai-peptide-calculator__custom-input-{{ ai_gen_id }}.active,
  .ai-peptide-calculator-{{ ai_gen_id }}[data-locale="ar"] .ai-peptide-calculator__custom-input-{{ ai_gen_id }}.active {
    flex-direction: row-reverse;
  }

  /* Keep scale left-to-right regardless of locale */
  .ai-peptide-calculator__scale-container-{{ ai_gen_id }} {
    direction: ltr !important;
  }

  .ai-peptide-calculator__scale-{{ ai_gen_id }},
  .ai-peptide-calculator__scale-labels-{{ ai_gen_id }},
  .ai-peptide-calculator__scale-markers-{{ ai_gen_id }} {
    direction: ltr !important;
  }

  /* Ensure scale text remains readable */
  [dir="rtl"] .ai-peptide-calculator__scale-title-{{ ai_gen_id }},
  .ai-peptide-calculator-{{ ai_gen_id }}[data-locale="ar"] .ai-peptide-calculator__scale-title-{{ ai_gen_id }} {
    direction: rtl;
  }

  /* RTL button alignment */
  [dir="rtl"] .ai-peptide-calculator__button-group-{{ ai_gen_id }},
  .ai-peptide-calculator-{{ ai_gen_id }}[data-locale="ar"] .ai-peptide-calculator__button-group-{{ ai_gen_id }} {
    direction: rtl;
  }

  /* RTL syringe options alignment */
  [dir="rtl"] .ai-peptide-calculator__syringe-options-{{ ai_gen_id }},
  .ai-peptide-calculator-{{ ai_gen_id }}[data-locale="ar"] .ai-peptide-calculator__syringe-options-{{ ai_gen_id }} {
    direction: rtl;
  }

  @media screen and (max-width: 768px) {
    [dir="rtl"] .ai-peptide-calculator__container-{{ ai_gen_id }},
    .ai-peptide-calculator-{{ ai_gen_id }}[data-locale="ar"] .ai-peptide-calculator__container-{{ ai_gen_id }} {
      direction: rtl;
    }
  }
{% endstyle %}

<peptide-calculator-{{ ai_gen_id }}
  class="ai-peptide-calculator-{{ ai_gen_id }}"
  {{ block.shopify_attributes }}
  data-locale="{{ request.locale.iso_code }}"
>
  <div class="ai-peptide-calculator__container-{{ ai_gen_id }}">
    <h2 class="ai-peptide-calculator__title-{{ ai_gen_id }}">
      {% if request.locale.iso_code == 'ar' and block.settings.title_ar != blank %}
        {{ block.settings.title_ar }}
      {% else %}
        {{ block.settings.title }}
      {% endif %}
    </h2>
    
    <div class="ai-peptide-calculator__syringe-section-{{ ai_gen_id }}">
      <h3 class="ai-peptide-calculator__syringe-title-{{ ai_gen_id }}">
        {% if request.locale.iso_code == 'ar' and block.settings.syringe_reference_ar != blank %}
          {{ block.settings.syringe_reference_ar }}
        {% else %}
          Syringe Reference
        {% endif %}
      </h3>
      <div class="ai-peptide-calculator__syringe-options-{{ ai_gen_id }}">
        <div class="ai-peptide-calculator__syringe-option-{{ ai_gen_id }} active" data-syringe="0.3">
          <div class="ai-peptide-calculator__syringe-image-{{ ai_gen_id }}">
            {% if block.settings.syringe_03ml_image %}
<img src="{{ block.settings.syringe_03ml_image | image_url: width: 160 }}" alt="0.3ml syringe" width="160" height="160" loading="lazy">            {% else %}
              <svg viewBox="0 0 100 200" xmlns="http://www.w3.org/2000/svg">
                <rect x="42" y="30" width="16" height="120" fill="#e0e0e0" stroke="#999" stroke-width="2"/>
                <rect x="38" y="150" width="24" height="15" fill="#ccc" stroke="#999" stroke-width="2"/>
                <circle cx="50" cy="20" r="6" fill="#999"/>
                <rect x="49" y="14" width="2" height="12" fill="#666"/>
                <rect x="44" y="40" width="12" height="6" fill="#ff6b6b"/>
              </svg>
            {% endif %}
          </div>
          <span class="ai-peptide-calculator__syringe-label-{{ ai_gen_id }}">
            {% if request.locale.iso_code == 'ar' %}
              0.3 مل
            {% else %}
              0.3 ml
            {% endif %}
          </span>
        </div>
        
        <div class="ai-peptide-calculator__syringe-option-{{ ai_gen_id }}" data-syringe="0.5">
          <div class="ai-peptide-calculator__syringe-image-{{ ai_gen_id }}">
            {% if block.settings.syringe_05ml_image %}
<img src="{{ block.settings.syringe_05ml_image | image_url: width: 160 }}" alt="0.5ml syringe" width="160" height="160" loading="lazy">            {% else %}
              <svg viewBox="0 0 100 200" xmlns="http://www.w3.org/2000/svg">
                <rect x="40" y="25" width="20" height="130" fill="#e0e0e0" stroke="#999" stroke-width="2"/>
                <rect x="36" y="155" width="28" height="18" fill="#ccc" stroke="#999" stroke-width="2"/>
                <circle cx="50" cy="15" r="7" fill="#999"/>
                <rect x="49" y="8" width="2" height="14" fill="#666"/>
                <rect x="42" y="35" width="16" height="10" fill="#4ecdc4"/>
              </svg>
            {% endif %}
          </div>
          <span class="ai-peptide-calculator__syringe-label-{{ ai_gen_id }}">
            {% if request.locale.iso_code == 'ar' %}
              0.5 مل
            {% else %}
              0.5 ml
            {% endif %}
          </span>
        </div>
        
        <div class="ai-peptide-calculator__syringe-option-{{ ai_gen_id }}" data-syringe="1.0">
          <div class="ai-peptide-calculator__syringe-image-{{ ai_gen_id }}">
            {% if block.settings.syringe_10ml_image %}
<img src="{{ block.settings.syringe_10ml_image | image_url: width: 160 }}" alt="1.0ml syringe" width="160" height="160" loading="lazy">            {% else %}
              <svg viewBox="0 0 100 200" xmlns="http://www.w3.org/2000/svg">
                <rect x="38" y="20" width="24" height="140" fill="#e0e0e0" stroke="#999" stroke-width="2"/>
                <rect x="34" y="160" width="32" height="20" fill="#ccc" stroke="#999" stroke-width="2"/>
                <circle cx="50" cy="10" r="8" fill="#999"/>
                <rect x="49" y="2" width="2" height="16" fill="#666"/>
                <rect x="40" y="30" width="20" height="16" fill="#45b7d1"/>
              </svg>
            {% endif %}
          </div>
          <span class="ai-peptide-calculator__syringe-label-{{ ai_gen_id }}">
            {% if request.locale.iso_code == 'ar' %}
              1.0 مل
            {% else %}
              1.0 ml
            {% endif %}
          </span>
        </div>
      </div>
    </div>
    <div class="ai-peptide-calculator__inputs-section-{{ ai_gen_id }}">
      <div class="ai-peptide-calculator__input-group-{{ ai_gen_id }}">
        <div class="ai-peptide-calculator__input-header-{{ ai_gen_id }}">
          <div class="ai-peptide-calculator__section-image-{{ ai_gen_id }}">
            {% if block.settings.vial_image %}
<img src="{{ block.settings.vial_image | image_url: width: 120 }}" alt="Peptide vial" width="120" height="120" loading="lazy">            {% else %}
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <rect x="30" y="20" width="40" height="60" rx="5" fill="#e8f4f8" stroke="#4a90a4" stroke-width="2"/>
                <rect x="25" y="15" width="50" height="10" rx="2" fill="#4a90a4"/>
                <circle cx="50" cy="50" r="8" fill="#4a90a4" opacity="0.3"/>
              </svg>
            {% endif %}
          </div>
          <label class="ai-peptide-calculator__input-label-{{ ai_gen_id }}">
            {% if request.locale.iso_code == 'ar' and block.settings.vial_label_ar != blank %}
              {{ block.settings.vial_label_ar }}
            {% else %}
              Peptide Vial Quantity (mg)
            {% endif %}
          </label>
        </div>
        <div class="ai-peptide-calculator__button-group-{{ ai_gen_id }}">
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="vial" data-value="2">
            {% if request.locale.iso_code == 'ar' %}2 ملغ{% else %}2 mg{% endif %}
          </button>
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="vial" data-value="3">
            {% if request.locale.iso_code == 'ar' %}3 ملغ{% else %}3 mg{% endif %}
          </button>
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="vial" data-value="5">
            {% if request.locale.iso_code == 'ar' %}5 ملغ{% else %}5 mg{% endif %}
          </button>
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="vial" data-value="10">
            {% if request.locale.iso_code == 'ar' %}10 ملغ{% else %}10 mg{% endif %}
          </button>
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="vial" data-value="15">
            {% if request.locale.iso_code == 'ar' %}15 ملغ{% else %}15 mg{% endif %}
          </button>
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="vial" data-value="other">
            {% if request.locale.iso_code == 'ar' and block.settings.other_button_ar != blank %}
              {{ block.settings.other_button_ar }}
            {% else %}
              Other
            {% endif %}
          </button>
        </div>
        <div class="ai-peptide-calculator__custom-input-{{ ai_gen_id }}" data-input="vial">
          <input type="number" class="ai-peptide-calculator__input-field-{{ ai_gen_id }}" 
            placeholder="{% if request.locale.iso_code == 'ar' %}أدخل الكمية{% else %}Enter amount{% endif %}" 
            min="0" step="0.1" aria-label="Custom peptide vial quantity">
        </div>
      </div>

      <div class="ai-peptide-calculator__input-group-{{ ai_gen_id }}">
        <div class="ai-peptide-calculator__input-header-{{ ai_gen_id }}">
          <div class="ai-peptide-calculator__section-image-{{ ai_gen_id }}">
            {% if block.settings.water_image %}
<img src="{{ block.settings.water_image | image_url: width: 120 }}" alt="Bacteriostatic water" width="120" height="120" loading="lazy">            {% else %}
              <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <rect x="25" y="15" width="50" height="70" rx="8" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
                <rect x="20" y="10" width="60" height="15" rx="3" fill="#1976d2"/>
                <path d="M40 35 Q50 25 60 35 Q50 45 40 35" fill="#1976d2" opacity="0.3"/>
                <circle cx="45" cy="55" r="3" fill="#1976d2" opacity="0.5"/>
                <circle cx="55" cy="65" r="2" fill="#1976d2" opacity="0.5"/>
              </svg>
            {% endif %}
          </div>
          <label class="ai-peptide-calculator__input-label-{{ ai_gen_id }}">
            {% if request.locale.iso_code == 'ar' and block.settings.water_label_ar != blank %}
              {{ block.settings.water_label_ar }}
            {% else %}
              Bacteriostatic Water Volume (ml)
            {% endif %}
          </label>
        </div>
        <div class="ai-peptide-calculator__button-group-{{ ai_gen_id }}">
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="liquid" data-value="1">
            {% if request.locale.iso_code == 'ar' %}1 مل{% else %}1 ml{% endif %}
          </button>
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="liquid" data-value="2">
            {% if request.locale.iso_code == 'ar' %}2 مل{% else %}2 ml{% endif %}
          </button>
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="liquid" data-value="3">
            {% if request.locale.iso_code == 'ar' %}3 مل{% else %}3 ml{% endif %}
          </button>
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="liquid" data-value="5">
            {% if request.locale.iso_code == 'ar' %}5 مل{% else %}5 ml{% endif %}
          </button>
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="liquid" data-value="other">
            {% if request.locale.iso_code == 'ar' and block.settings.other_button_ar != blank %}
              {{ block.settings.other_button_ar }}
            {% else %}
              Other
            {% endif %}
          </button>
        </div>
        <div class="ai-peptide-calculator__custom-input-{{ ai_gen_id }}" data-input="liquid">
          <input type="number" class="ai-peptide-calculator__input-field-{{ ai_gen_id }}" 
            placeholder="{% if request.locale.iso_code == 'ar' %}أدخل الحجم{% else %}Enter volume{% endif %}" 
            min="0" step="0.1" aria-label="Custom bacteriostatic water volume">
        </div>
      </div>

      <div class="ai-peptide-calculator__input-group-{{ ai_gen_id }}">
        <div class="ai-peptide-calculator__input-header-{{ ai_gen_id }}">
          <label class="ai-peptide-calculator__input-label-{{ ai_gen_id }}">
            {% if request.locale.iso_code == 'ar' and block.settings.dose_label_ar != blank %}
              {{ block.settings.dose_label_ar }}
            {% else %}
              Desired Dose
            {% endif %}
          </label>
        </div>
        <div class="ai-peptide-calculator__button-group-{{ ai_gen_id }}">
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="dose" data-value="50" data-unit="mcg">
            {% if request.locale.iso_code == 'ar' %}50 مكغ{% else %}50 mcg{% endif %}
          </button>
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="dose" data-value="100" data-unit="mcg">
            {% if request.locale.iso_code == 'ar' %}100 مكغ{% else %}100 mcg{% endif %}
          </button>
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="dose" data-value="250" data-unit="mcg">
            {% if request.locale.iso_code == 'ar' %}250 مكغ{% else %}250 mcg{% endif %}
          </button>
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="dose" data-value="500" data-unit="mcg">
            {% if request.locale.iso_code == 'ar' %}500 مكغ{% else %}500 mcg{% endif %}
          </button>
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="dose" data-value="1" data-unit="mg">
            {% if request.locale.iso_code == 'ar' %}1 ملغ{% else %}1 mg{% endif %}
          </button>
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="dose" data-value="2.5" data-unit="mg">
            {% if request.locale.iso_code == 'ar' %}2.5 ملغ{% else %}2.5 mg{% endif %}
          </button>
          <button class="ai-peptide-calculator__preset-button-{{ ai_gen_id }}" data-input="dose" data-value="other">
            {% if request.locale.iso_code == 'ar' and block.settings.other_button_ar != blank %}
              {{ block.settings.other_button_ar }}
            {% else %}
              Other
            {% endif %}
          </button>
        </div>
        <div class="ai-peptide-calculator__custom-input-{{ ai_gen_id }}" data-input="dose">
          <input type="number" class="ai-peptide-calculator__input-field-{{ ai_gen_id }}" 
            placeholder="{% if request.locale.iso_code == 'ar' %}أدخل الجرعة{% else %}Enter dose{% endif %}" 
            min="0" step="0.1" aria-label="Custom desired dose">
          <select class="ai-peptide-calculator__unit-selector-{{ ai_gen_id }}" aria-label="Dose unit">
            <option value="mcg">{% if request.locale.iso_code == 'ar' %}مكغ{% else %}mcg{% endif %}</option>
            <option value="mg">{% if request.locale.iso_code == 'ar' %}ملغ{% else %}mg{% endif %}</option>
          </select>
        </div>
      </div>
    </div>
    <div class="ai-peptide-calculator__result-{{ ai_gen_id }}">
      <h3 class="ai-peptide-calculator__result-title-{{ ai_gen_id }}">
        {% if request.locale.iso_code == 'ar' and block.settings.result_title_ar != blank %}
          {{ block.settings.result_title_ar }}
        {% else %}
          Your Required Dose
        {% endif %}
      </h3>
      <div class="ai-peptide-calculator__result-text-{{ ai_gen_id }}">
        <div class="ai-peptide-calculator__empty-state-{{ ai_gen_id }}">
          {% if request.locale.iso_code == 'ar' and block.settings.empty_state_ar != blank %}
            {{ block.settings.empty_state_ar }}
          {% else %}
            Please fill in all fields above to calculate your dose.
          {% endif %}
        </div>
      </div>
      <div class="ai-peptide-calculator__scale-container-{{ ai_gen_id }}" id="scale-container-{{ ai_gen_id }}" style="display: none;">
        <div class="ai-peptide-calculator__scale-title-{{ ai_gen_id }}">
          {% if request.locale.iso_code == 'ar' and block.settings.scale_title_ar != blank %}
            {{ block.settings.scale_title_ar }}
          {% else %}
            Syringe Scale Visualization
          {% endif %}
        </div>
        <div class="ai-peptide-calculator__scale-{{ ai_gen_id }}">
          <div class="ai-peptide-calculator__scale-fill-{{ ai_gen_id }}" id="scale-fill-{{ ai_gen_id }}"></div>
          <div class="ai-peptide-calculator__scale-markers-{{ ai_gen_id }}" id="scale-markers-{{ ai_gen_id }}"></div>
          <div class="ai-peptide-calculator__dose-indicator-{{ ai_gen_id }}" id="dose-indicator-{{ ai_gen_id }}">
            <div class="ai-peptide-calculator__dose-value-{{ ai_gen_id }}" id="dose-value-{{ ai_gen_id }}"></div>
          </div>
        </div>
        <div class="ai-peptide-calculator__scale-labels-{{ ai_gen_id }}" id="scale-labels-{{ ai_gen_id }}">
          <span>0</span>
          <span>0.3 ml</span>
        </div>
      </div>
    </div>
  </div>
</peptide-calculator-{{ ai_gen_id }}>

<script>
  (function() {
    class PeptideCalculator{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
        this.vialAmount = null;
        this.liquidVolume = null;
        this.desiredDose = null;
        this.doseUnit = 'mcg';
        this.selectedSyringe = '0.3';
        this.locale = this.dataset.locale || 'en';
        
        // Localization strings
        this.translations = {
          en: {
            ml: 'ml',
            mg: 'mg',
            mcg: 'mcg',
            units: 'units',
            warning: 'Warning',
            requiredDose: 'Required dose',
            exceedsCapacity: 'exceeds selected syringe capacity',
            selectLarger: 'Please select a larger syringe or adjust your dose.',
            drawTo: 'Draw to the',
            mark: 'mark on your',
            syringe: 'syringe.',
            equalTo: 'This is equal to',
            onSyringe: 'on a U-100 syringe.'
          },
          ar: {
            ml: 'مل',
            mg: 'ملغ',
            mcg: 'مكغ',
            units: 'وحدات',
            warning: 'تحذير',
            requiredDose: 'الجرعة المطلوبة',
            exceedsCapacity: 'تتجاوز سعة المحقن المختار',
            selectLarger: 'يرجى اختيار محقن أكبر أو تعديل جرعتك.',
            drawTo: 'اسحب إلى علامة',
            mark: '',
            syringe: 'على محقن',
            equalTo: 'هذا يساوي',
            onSyringe: 'على محقن U-100.'
          }
        };
      }

      connectedCallback() {
        this.setupEventListeners();
        this.updateCalculation();
      }

      t(key) {
        return this.translations[this.locale]?.[key] || this.translations.en[key];
      }

      setupEventListeners() {
        const syringeOptions = this.querySelectorAll('.ai-peptide-calculator__syringe-option-{{ ai_gen_id }}');
        const presetButtons = this.querySelectorAll('.ai-peptide-calculator__preset-button-{{ ai_gen_id }}');
        const customInputs = this.querySelectorAll('.ai-peptide-calculator__input-field-{{ ai_gen_id }}');
        const unitSelector = this.querySelector('.ai-peptide-calculator__unit-selector-{{ ai_gen_id }}');

        syringeOptions.forEach(option => {
          option.addEventListener('click', () => {
            syringeOptions.forEach(opt => opt.classList.remove('active'));
            option.classList.add('active');
            this.selectedSyringe = option.dataset.syringe;
            this.updateCalculation();
          });
        });

        presetButtons.forEach(button => {
          button.addEventListener('click', () => {
            const inputType = button.dataset.input;
            const value = button.dataset.value;
            const unit = button.dataset.unit;
            
            const group = button.closest('.ai-peptide-calculator__input-group-{{ ai_gen_id }}');
            const buttons = group.querySelectorAll('.ai-peptide-calculator__preset-button-{{ ai_gen_id }}');
            const customInput = group.querySelector('.ai-peptide-calculator__custom-input-{{ ai_gen_id }}');
            
            buttons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');

            if (value === 'other') {
              customInput.classList.add('active');
              const input = customInput.querySelector('.ai-peptide-calculator__input-field-{{ ai_gen_id }}');
              setTimeout(() => input.focus(), 100);
            } else {
              customInput.classList.remove('active');
              
              if (inputType === 'vial') {
                this.vialAmount = parseFloat(value);
              } else if (inputType === 'liquid') {
                this.liquidVolume = parseFloat(value);
              } else if (inputType === 'dose') {
                this.desiredDose = parseFloat(value);
                this.doseUnit = unit || 'mcg';
              }
              
              this.updateCalculation();
            }
          });
        });

        customInputs.forEach(input => {
          input.addEventListener('input', () => {
            const group = input.closest('.ai-peptide-calculator__input-group-{{ ai_gen_id }}');
            const inputType = group.querySelector('.ai-peptide-calculator__custom-input-{{ ai_gen_id }}').dataset.input;
            const value = parseFloat(input.value);
            
            if (!isNaN(value) && value > 0) {
              if (inputType === 'vial') {
                this.vialAmount = value;
              } else if (inputType === 'liquid') {
                this.liquidVolume = value;
              } else if (inputType === 'dose') {
                this.desiredDose = value;
                const unitSelector = group.querySelector('.ai-peptide-calculator__unit-selector-{{ ai_gen_id }}');
                this.doseUnit = unitSelector ? unitSelector.value : 'mcg';
              }
            } else {
              if (inputType === 'vial') {
                this.vialAmount = null;
              } else if (inputType === 'liquid') {
                this.liquidVolume = null;
              } else if (inputType === 'dose') {
                this.desiredDose = null;
              }
            }
            
            this.updateCalculation();
          });
        });

        if (unitSelector) {
          unitSelector.addEventListener('change', () => {
            this.doseUnit = unitSelector.value;
            this.updateCalculation();
          });
        }
      }
      updateScaleLabels() {
        const scaleLabels = this.querySelector('#scale-labels-{{ ai_gen_id }}');
        const maxVolume = parseFloat(this.selectedSyringe);
        
        let labels = [];
        
        if (maxVolume === 0.3) {
          labels = ['0', '0.05', '0.1', '0.15', '0.2', '0.25', '0.3'];
        } else if (maxVolume === 0.5) {
          labels = ['0', '0.1', '0.2', '0.3', '0.4', '0.5'];
        } else if (maxVolume === 1.0) {
          labels = ['0', '0.2', '0.4', '0.6', '0.8', '1.0'];
        }
        
        // Add ml suffix based on locale
        const mlSuffix = this.locale === 'ar' ? ' مل' : ' ml';
        scaleLabels.innerHTML = labels.map((label, index) => {
          // Only add suffix to the last label
          const displayLabel = index === labels.length - 1 ? label : label;
          return `<span>${displayLabel}</span>`;
        }).join('');
      }

      updateScaleMarkers() {
        const scaleMarkers = this.querySelector('#scale-markers-{{ ai_gen_id }}');
        const maxVolume = parseFloat(this.selectedSyringe);
        let markersHtml = '';
        
        let divisions, majorEvery;
        
        if (maxVolume === 0.3) {
          divisions = 30;
          majorEvery = 5;
        } else if (maxVolume === 0.5) {
          divisions = 50;
          majorEvery = 10;
        } else if (maxVolume === 1.0) {
          divisions = 100;
          majorEvery = 20;
        }
        
        for (let i = 0; i <= divisions; i++) {
          const position = (i / divisions) * 100;
          const isMajor = i % majorEvery === 0;
          markersHtml += `<div class="ai-peptide-calculator__scale-marker-{{ ai_gen_id }} ${isMajor ? 'major' : ''}" style="left: ${position}%"></div>`;
        }
        
        scaleMarkers.innerHTML = markersHtml;
      }
      updateCalculation() {
        const resultText = this.querySelector('.ai-peptide-calculator__result-text-{{ ai_gen_id }}');
        const scaleContainer = this.querySelector('#scale-container-{{ ai_gen_id }}');
        const scaleFill = this.querySelector('#scale-fill-{{ ai_gen_id }}');
        const doseIndicator = this.querySelector('#dose-indicator-{{ ai_gen_id }}');
        const doseValue = this.querySelector('#dose-value-{{ ai_gen_id }}');
        
        if (!this.vialAmount || !this.liquidVolume || !this.desiredDose) {
          resultText.innerHTML = '<div class="ai-peptide-calculator__empty-state-{{ ai_gen_id }}">{% if request.locale.iso_code == "ar" and block.settings.empty_state_ar != blank %}{{ block.settings.empty_state_ar }}{% else %}Please fill in all fields above to calculate your dose.{% endif %}</div>';
          scaleContainer.style.display = 'none';
          return;
        }

        const concentration = this.vialAmount / this.liquidVolume;
        
        let standardizedDose;
        if (this.doseUnit === 'mcg') {
          standardizedDose = this.desiredDose / 1000;
        } else {
          standardizedDose = this.desiredDose;
        }
        
        const volume = standardizedDose / concentration;
        const syringeUnits = Math.round(volume * 100);
        const maxSyringeVolume = parseFloat(this.selectedSyringe);
        
        const volumeFormatted = volume.toFixed(2);
        
        if (volume > maxSyringeVolume) {
          if (this.locale === 'ar') {
            resultText.innerHTML = `
              <div style="color: #d32f2f;">
                <strong>${this.t('warning')}:</strong> ${this.t('requiredDose')} (${volumeFormatted} ${this.t('ml')}) ${this.t('exceedsCapacity')} (${maxSyringeVolume} ${this.t('ml')}).
              </div>
              <div style="margin-top: 10px;">
                ${this.t('selectLarger')}
              </div>
            `;
          } else {
            resultText.innerHTML = `
              <div style="color: #d32f2f;">
                <strong>${this.t('warning')}:</strong> ${this.t('requiredDose')} (${volumeFormatted} ${this.t('ml')}) ${this.t('exceedsCapacity')} (${maxSyringeVolume} ${this.t('ml')}).
              </div>
              <div style="margin-top: 10px;">
                ${this.t('selectLarger')}
              </div>
            `;
          }
          scaleContainer.style.display = 'none';
          return;
        }
        
        if (this.locale === 'ar') {
          resultText.innerHTML = `
            <div>
              ${this.t('drawTo')} <span class="ai-peptide-calculator__result-highlight-{{ ai_gen_id }}">${volumeFormatted} ${this.t('ml')}</span> ${this.t('syringe')} ${maxSyringeVolume} ${this.t('ml')}.
            </div>
            <div style="margin-top: 10px;">
              ${this.t('equalTo')} <span class="ai-peptide-calculator__result-highlight-{{ ai_gen_id }}">${syringeUnits} ${this.t('units')}</span> ${this.t('onSyringe')}
            </div>
          `;
        } else {
          resultText.innerHTML = `
            <div>
              ${this.t('drawTo')} <span class="ai-peptide-calculator__result-highlight-{{ ai_gen_id }}">${volumeFormatted} ${this.t('ml')}</span> ${this.t('mark')} on your ${maxSyringeVolume} ${this.t('ml')} ${this.t('syringe')}
            </div>
            <div style="margin-top: 10px;">
              ${this.t('equalTo')} <span class="ai-peptide-calculator__result-highlight-{{ ai_gen_id }}">${syringeUnits} ${this.t('units')}</span> ${this.t('onSyringe')}
            </div>
          `;
        }
        
        scaleContainer.style.display = 'flex';
        this.updateScaleLabels();
        this.updateScaleMarkers();
        
        const fillPercentage = Math.min((volume / maxSyringeVolume) * 100, 100);
        
        setTimeout(() => {
          scaleFill.style.width = `${fillPercentage}%`;
          doseIndicator.style.left = `${fillPercentage}%`;
          doseValue.textContent = `${volumeFormatted} ${this.t('ml')}`;
        }, 100);
      }
    }

    customElements.define('peptide-calculator-{{ ai_gen_id }}', PeptideCalculator{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Peptide dosage calculator",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Localization"
    },
    {
      "type": "text",
      "id": "title_ar",
      "label": "Calculator title (Arabic)",
      "default": "حاسبة جرعة الببتيد"
    },
    {
      "type": "text",
      "id": "syringe_reference_ar",
      "label": "Syringe reference title (Arabic)",
      "default": "مرجع المحقن"
    },
    {
      "type": "text",
      "id": "vial_label_ar",
      "label": "Peptide vial label (Arabic)",
      "default": "كمية قنينة الببتيد (ملغ)"
    },
    {
      "type": "text",
      "id": "water_label_ar",
      "label": "Bacteriostatic water label (Arabic)",
      "default": "حجم الماء البكتيريوستاتي (مل)"
    },
    {
      "type": "text",
      "id": "dose_label_ar",
      "label": "Desired dose label (Arabic)",
      "default": "الجرعة المطلوبة"
    },
    {
      "type": "text",
      "id": "other_button_ar",
      "label": "Other button text (Arabic)",
      "default": "أخرى"
    },
    {
      "type": "text",
      "id": "result_title_ar",
      "label": "Result title (Arabic)",
      "default": "الجرعة المطلوبة"
    },
    {
      "type": "text",
      "id": "empty_state_ar",
      "label": "Empty state message (Arabic)",
      "default": "يرجى ملء جميع الحقول أعلاه لحساب جرعتك."
    },
    {
      "type": "text",
      "id": "scale_title_ar",
      "label": "Scale title (Arabic)",
      "default": "رسم توضيحي لمقياس المحقن"
    },
    {
      "type": "text",
      "id": "warning_exceeds_ar",
      "label": "Warning exceeds text (Arabic)",
      "default": "تحذير: الجرعة المطلوبة"
    },
    {
      "type": "text",
      "id": "warning_exceeds_capacity_ar",
      "label": "Warning capacity text (Arabic)",
      "default": "تتجاوز سعة المحقن المختار"
    },
    {
      "type": "text",
      "id": "warning_select_larger_ar",
      "label": "Warning select larger text (Arabic)",
      "default": "يرجى اختيار محقن أكبر أو تعديل جرعتك."
    },
    {
      "type": "text",
      "id": "result_draw_to_ar",
      "label": "Result draw to text (Arabic)",
      "default": "اسحب إلى علامة"
    },
    {
      "type": "text",
      "id": "result_on_syringe_ar",
      "label": "Result on syringe text (Arabic)",
      "default": "على محقن"
    },
    {
      "type": "text",
      "id": "result_equal_to_ar",
      "label": "Result equal to text (Arabic)",
      "default": "هذا يساوي"
    },
    {
      "type": "text",
      "id": "result_units_ar",
      "label": "Result units text (Arabic)",
      "default": "وحدات على محقن U-100."
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Calculator title",
      "default": "Peptide Dosage Calculator"
    },
    {
      "type": "header",
      "content": "Syringe images"
    },
    {
      "type": "image_picker",
      "id": "syringe_03ml_image",
      "label": "0.3ml syringe image"
    },
    {
      "type": "image_picker",
      "id": "syringe_05ml_image",
      "label": "0.5ml syringe image"
    },
    {
      "type": "image_picker",
      "id": "syringe_10ml_image",
      "label": "1.0ml syringe image"
    },
    {
      "type": "range",
      "id": "syringe_image_rotation",
      "min": 0,
      "max": 360,
      "step": 15,
      "unit": "deg",
      "label": "Syringe image rotation",
      "default": 0
    },
    {
      "type": "header",
      "content": "Section images"
    },
    {
      "type": "image_picker",
      "id": "vial_image",
      "label": "Peptide vial image"
    },
    {
      "type": "image_picker",
      "id": "water_image",
      "label": "Bacteriostatic water image"
    },
    {
      "type": "range",
      "id": "section_image_rotation",
      "min": 0,
      "max": 360,
      "step": 15,
      "unit": "deg",
      "label": "Section image rotation",
      "default": 0
    },
    {
      "type": "header",
      "content": "Main colors"
    },
    {
      "type": "color",
      "id": "primary_color",
      "label": "Primary color",
      "default": "#171717"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#171717"
    },
    {
      "type": "header",
      "content": "Syringe options"
    },
    {
      "type": "color",
      "id": "syringe_option_background",
      "label": "Syringe option background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "syringe_option_active_background",
      "label": "Active syringe background",
      "default": "#f0f0f0"
    },
    {
      "type": "color",
      "id": "image_placeholder_background",
      "label": "Image placeholder background",
      "default": "#f0f0f0"
    },
    {
      "type": "color",
      "id": "icon_color",
      "label": "Icon color",
      "default": "#666666"
    },
    {
      "type": "header",
      "content": "Buttons"
    },
    {
      "type": "color",
      "id": "button_background",
      "label": "Button background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#171717"
    },
    {
      "type": "color",
      "id": "button_border_color",
      "label": "Button border color",
      "default": "#171717"
    },
    {
      "type": "color",
      "id": "button_active_background",
      "label": "Active button background",
      "default": "#171717"
    },
    {
      "type": "color",
      "id": "button_active_text_color",
      "label": "Active button text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_active_border_color",
      "label": "Active button border color",
      "default": "#171717"
    },
    {
      "type": "header",
      "content": "Input fields"
    },
    {
      "type": "color",
      "id": "input_background",
      "label": "Input background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "input_text_color",
      "label": "Input text color",
      "default": "#171717"
    },
    {
      "type": "color",
      "id": "input_border_color",
      "label": "Input border color",
      "default": "#e5e5e5"
    },
    {
      "type": "color",
      "id": "input_focus_border_color",
      "label": "Input focus border color",
      "default": "#171717"
    },
    {
      "type": "header",
      "content": "Result section"
    },
    {
      "type": "color",
      "id": "result_background",
      "label": "Result background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "result_border_color",
      "label": "Result border color",
      "default": "#171717"
    },
    {
      "type": "color",
      "id": "result_title_color",
      "label": "Result title color",
      "default": "#171717"
    },
    {
      "type": "color",
      "id": "result_text_color",
      "label": "Result text color",
      "default": "#171717"
    },
    {
      "type": "color",
      "id": "result_highlight_color",
      "label": "Result highlight color",
      "default": "#171717"
    },
    {
      "type": "color",
      "id": "empty_state_color",
      "label": "Empty state text color",
      "default": "#666666"
    },
    {
      "type": "header",
      "content": "Scale visualization"
    },
    {
      "type": "color",
      "id": "scale_background",
      "label": "Scale background",
      "default": "#f0f0f0"
    },
    {
      "type": "color",
      "id": "scale_border_color",
      "label": "Scale border color",
      "default": "#dddddd"
    },
    {
      "type": "color",
      "id": "scale_fill_color",
      "label": "Scale fill color",
      "default": "#ffd700"
    },
    {
      "type": "color",
      "id": "scale_label_color",
      "label": "Scale label color",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "scale_marker_color",
      "label": "Scale marker color",
      "default": "#999999"
    },
    {
      "type": "color",
      "id": "scale_major_marker_color",
      "label": "Major scale marker color",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "dose_indicator_color",
      "label": "Dose indicator color",
      "default": "#d32f2f"
    },
    {
      "type": "color",
      "id": "dose_value_text_color",
      "label": "Dose value text color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "font_picker",
      "id": "font_family",
      "label": "Font family",
      "default": "inter_n4"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 12
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Button border radius",
      "default": 8
    }
  ],
  "presets": [
    {
      "name": "Peptide dosage calculator"
    }
  ]
}
{% endschema %}